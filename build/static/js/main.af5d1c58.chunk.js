(this.webpackJsonpamp=this.webpackJsonpamp||[]).push([[0],{106:function(e,t){},248:function(e,t,n){e.exports=n(781)},253:function(e,t,n){},781:function(e,t,n){"use strict";n.r(t);var a,r,o=n(0),i=n.n(o),c=n(61),s=n.n(c),u=(n(253),n(36)),l=n(77),d=n(235),p={aws_project_region:"us-east-1",aws_cognito_identity_pool_id:"us-east-1:0b8c72ab-b3a6-4d5b-bf37-7b4a804cc74c",aws_cognito_region:"us-east-1",aws_user_pools_id:"us-east-1_anVGui2vK",aws_user_pools_web_client_id:"m6hr6vebml108alin2rqog1s7",oauth:{},aws_cognito_username_attributes:[],aws_cognito_social_providers:[],aws_cognito_signup_attributes:["EMAIL"],aws_cognito_mfa_configuration:"OFF",aws_cognito_mfa_types:["SMS"],aws_cognito_password_protection_settings:{passwordPolicyMinLength:8,passwordPolicyCharacters:[]},aws_cognito_verification_mechanisms:["EMAIL"],aws_appsync_graphqlEndpoint:"https://htza367pjrfdrnutotrhzzghkq.appsync-api.us-east-1.amazonaws.com/graphql",aws_appsync_region:"us-east-1",aws_appsync_authenticationType:"API_KEY",aws_appsync_apiKey:"da2-yezgopd35jhwdc3abhx5wdta5a",predictions:{identify:{identifyLabels:{proxy:!1,region:"us-east-1",defaults:{type:"LABELS"}}}}},m=n(56),b=function(){var e=Object(o.useState)(""),t=Object(m.a)(e,2),n=t[0],a=t[1];return u.b.currentAuthenticatedUser().then((function(e){var t=e.signInUserSession.accessToken.payload["cognito:groups"];a(t&&1===t.length?t[0]:"")})).catch((function(e){throw new Error(e)})),{group:n}},g=n(225),f=n.n(g),h=n(789),_=n(70),w="\n  mutation UpdateFacility(\n    $input: UpdateFacilityInput!\n    $condition: ModelFacilityConditionInput\n  ) {\n    updateFacility(input: $input, condition: $condition) {\n      id\n      name\n      numberOfPeople\n      description\n      recordingStatus\n      createdAt\n      updatedAt\n    }\n  }\n";!function(e){e.ACTIVE="ACTIVE",e.INACTIVE="INACTIVE"}(a||(a={})),function(e){e.binary="binary",e.binarySet="binarySet",e.bool="bool",e.list="list",e.map="map",e.number="number",e.numberSet="numberSet",e.string="string",e.stringSet="stringSet",e._null="_null"}(r||(r={}));var E=function(e){var t="b552d748-3667-4be8-b9f7-2795384068bb",n=e.webCamRef,r=e.captureInterval,i=Object(o.useState)(Number),c=Object(m.a)(i,2),s=c[0],l=c[1],d=Object(o.useCallback)((function(){if(n&&n.current){var e=n.current.getScreenshot(),a=function(e,t){for(var n=atob(e.replace(/^.*,/,"")),a=new Uint8Array(n.length),r=0;r<n.length;r++)a[r]=n.charCodeAt(r);return new File([a.buffer],t,{type:"image/jpeg"})}(null!==e?e:"","");u.c.identify({labels:{source:{file:a},type:"ALL"}}).then((function(e){if(!e||!e.labels)return 0;var t=e.labels.filter((function(e){return"Person"===e.name}));return t.length>0?t[0].boundingBoxes.length:0})).then((function(e){u.a.graphql(Object(u.e)(w,{input:{id:t,numberOfPeople:e}}))})).catch((function(e){throw new Error(e)}))}}),[n]);return{startRecord:function(){u.a.graphql(Object(u.e)(w,{input:{id:t,recordingStatus:a.ACTIVE}})).then((function(){l(window.setInterval(d,r))}))},endRecord:function(){clearInterval(s),u.a.graphql(Object(u.e)(w,{input:{id:t,recordingStatus:a.INACTIVE}}))}}},y=function(){var e=Object(o.useRef)(null),t=Object(o.useState)(!1),n=Object(m.a)(t,2),a=n[0],r=n[1],c=E({webCamRef:e,captureInterval:1e3}),s=c.startRecord,u=c.endRecord;return i.a.createElement(i.a.Fragment,null,i.a.createElement(f.a,{audio:!1,width:"50%",screenshotFormat:"image/png",ref:e,screenshotQuality:1,videoConstraints:{facingMode:"environment"}}),i.a.createElement("br",null),i.a.createElement(h.a,{color:"green",disabled:a,onClick:function(){r(!0),s()}},"Start"),i.a.createElement(h.a,{color:"purple",disabled:!a,onClick:function(){r(!1),u()}},"Stop"),a?i.a.createElement(_.a,{name:"record",size:"large",color:"green"}):"")},v=n(790),I=n(792),S=n(788),A=n(236),C=n(791),O=function(){var e=Object(o.useState)({__typename:"Facility",id:"",name:"",numberOfPeople:0,description:"",recordingStatus:a.INACTIVE,createdAt:"",updatedAt:""}),t=Object(m.a)(e,2),n=t[0],r=t[1];return Object(o.useEffect)((function(){var e=u.a.graphql(Object(u.e)("\n  subscription OnUpdateFacility {\n    onUpdateFacility {\n      id\n      name\n      numberOfPeople\n      description\n      recordingStatus\n      createdAt\n      updatedAt\n    }\n  }\n")).subscribe({next:function(e){r(e.value.data.onUpdateFacility)}});return function(){e.unsubscribe()}}),[]),{facility:n}},j=function(){var e=O().facility,t=e?e.numberOfPeople:0,n=e?e.recordingStatus:a.INACTIVE,r=e?e.name:"--",o=e?e.description:"";return i.a.createElement(i.a.Fragment,null,i.a.createElement(v.a.Group,null,i.a.createElement(I.a,{as:v.a},i.a.createElement(S.a,{fluid:!0},i.a.createElement(A.a,{src:"https://d1.awsstatic.com/Startups/Loft%20Photos/tokyo/photo6.0851f9d9db5876b99ac9b7a8dc6adcba15f0f638.jpg",wrapped:!0,ui:!1}),i.a.createElement(S.a.Content,null,i.a.createElement(S.a.Header,null,r),i.a.createElement(S.a.Description,null,o)),i.a.createElement(S.a.Content,{extra:!0},i.a.createElement(C.a,null,i.a.createElement(C.a.Row,{columns:12},i.a.createElement(C.a.Column,{width:5},i.a.createElement(_.a,{name:"user"}),t," \u4eba"),i.a.createElement(C.a.Column,{width:6}),i.a.createElement(C.a.Column,{width:3},n===a.ACTIVE?i.a.createElement(_.a,{name:"record",color:"green"}):i.a.createElement(_.a,{name:"record"})))))))))};n(780);u.d.configure(p),u.d.addPluggable(new l.a);var F=Object(d.a)((function(){var e=b().group;return i.a.createElement(i.a.Fragment,null,"admin"===e?i.a.createElement(y,null):i.a.createElement(j,null))}),!0);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[248,1,2]]]);
//# sourceMappingURL=main.af5d1c58.chunk.js.map